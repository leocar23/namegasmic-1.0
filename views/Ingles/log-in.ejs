<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Log In - NameGasm</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      background-color: #0d1b3a; 
      color: white; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      height: 100vh; 
      margin: 0;
    }
    .login-box {
      background: white;
      color: #0d1b3a;
      padding: 50px;
      border-radius: 12px;
      width: 300px;
      text-align: center;
      box-sizing: border-box;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }
    input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      background-color: #0073e6;
      color: white;
      padding: 10px;
      border: none;
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background-color: #0a66c2;
    }
    /* BotÃ³n Salir fijo */
    .btn-exit {
      position: fixed;
      top: 16px;
      right: 16px;
      padding: 10px 16px; 
      background-color: #d32f2f; 
      color: white; 
      border: none; 
      border-radius: 8px; 
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
    }
    .btn-exit:hover { background-color: #b71c1c; }

    /* Selector de idioma fijo */
    .lang-switch {
      position: fixed; 
      top: 16px; 
      left: 16px; 
      z-index: 9999;
    }
    .lang-switch img {
      width: 60px; 
      height: 50px; 
      cursor: pointer;
      display: block;
    }

    /* Chatbot */
    #chatbot-container { position: fixed; bottom: 20px; right: 20px; z-index: 9999; }
    #chatbot-toggle {
      background:#0073e6; color:#fff; border:none; padding:12px 18px; border-radius:50px; cursor:pointer; 
      box-shadow:0px 4px 8px rgba(0,0,0,0.2);
    }
    #chatbot-box {
      display:none; width:300px; height:400px; background:#fff; border-radius:12px; 
      box-shadow:0px 4px 10px rgba(0,0,0,0.3); position:absolute; bottom:60px; right:0; overflow:hidden;
    }
  </style>
</head>
<body>

  <!-- Idioma de inglÃ©s a espaÃ±ol -->
  <div class="lang-switch">
    <a href="/es/esp-log-in">
      <img src="/img/bandera-es.png" alt="EspaÃ±ol">
    </a>
  </div>

  <!-- BotÃ³n Salir -->
  <button class="btn-exit" onclick="window.location.href='https://www.google.com'">Exit</button>

  <!-- Caja de Log In -->
  <div class="login-box">
    <h2>Log In</h2>
    <input type="email" id="loginEmail" placeholder="Email" autocomplete="username">
    <input type="password" id="loginPassword" placeholder="Password" autocomplete="current-password">
    <button id="loginBtn">Log In</button>
  </div>

  <!-- Firebase (compat para usar la sintaxis .auth() y .initializeApp) -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
  <script>
    // ðŸ”¹ Reemplaza con tu configuraciÃ³n real de Firebase
    const firebaseConfig = {
      apiKey: "TU_API_KEY",
      authDomain: "TU_PROYECTO.firebaseapp.com",
      projectId: "TU_PROYECTO",
      storageBucket: "TU_PROYECTO.appspot.com",
      messagingSenderId: "XXXX",
      appId: "XXXX"
    };

    // Inicializar Firebase (compat)
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Log In
    document.getElementById("loginBtn").addEventListener("click", login);

    function login() {
      const email = document.getElementById("loginEmail").value.trim();
      const password = document.getElementById("loginPassword").value;

      if (!email || !password) {
        alert("Please enter your email and password.");
        return;
      }

      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          // Opcional: verifica email
          if (!userCredential.user.emailVerified) {
            // Puedes permitir el acceso igual o forzar verificaciÃ³n:
            // return alert("Please verify your email before logging in.");
          }
          alert("Welcome back!");
          // Ajusta la ruta segÃºn tu hosting (archivo o ruta)
          window.location.href = "./dashboard.html";
        })
        .catch(error => {
          alert("Error: " + error.message);
        });
    }
  </script>

  <!-- Chatbot Universal -->
  <div id="chatbot-container">
    <button id="chatbot-toggle">ðŸ’¬ Chat</button>
    <div id="chatbot-box">
      <div style="background:#0073e6; color:white; padding:10px; font-weight:bold;">Assistant</div>
      <div id="chatbot-messages" style="height:300px; overflow-y:auto; padding:10px; font-size:14px; color:#0d1b3a;"></div>
      <div style="display:flex; border-top:1px solid #ccc;">
        <input type="text" id="chatbot-input" placeholder="Write here..." style="flex:1; border:none; padding:10px; font-size:14px;">
        <button id="chatbot-send" style="background:#0073e6; color:#fff; border:none; padding:10px; cursor:pointer;">âž¤</button>
      </div>
    </div>
  </div>

  <script>
    const toggle = document.getElementById("chatbot-toggle");
    const box = document.getElementById("chatbot-box");
    const input = document.getElementById("chatbot-input");
    const send = document.getElementById("chatbot-send");
    const messages = document.getElementById("chatbot-messages");

    toggle.addEventListener("click", () => {
      box.style.display = (box.style.display === "none" || box.style.display === "") ? "block" : "none";
    });

    send.addEventListener("click", () => {
      const text = input.value.trim();
      if (text) {
        messages.innerHTML += `<div style="margin-bottom:10px;"><strong>You:</strong> ${text}</div>`;
        messages.innerHTML += `<div style="margin-bottom:10px;"><strong>Bot:</strong> Thank you, your answer is on its way.</div>`;
        input.value = "";
        messages.scrollTop = messages.scrollHeight;
      }
    });

    // Enviar con Enter
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") send.click();
    });
  </script>

</body>
</html>
